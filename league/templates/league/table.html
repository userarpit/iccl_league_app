{% extends 'league/base.html' %}

{% block content %}
<h2 class="text-3xl font-bold text-gray-700 mb-6">ðŸ“Š League Table</h2>

<div class="mb-4">
    <label for="match-week" class="block text-gray-700 text-sm font-bold mb-2">Select Match Week:</label>
    <select id="match-week" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline">
        {% for week in match_weeks %}
        <option value="{{ week }}" {% if week == selected_week %}selected{% endif %}>Match Week {{ week }}</option>
        {% endfor %}
    </select>
</div>

<div class="overflow-x-auto bg-white rounded-lg shadow-md p-4">
    {{ points_table_html|safe }}
</div>

<style>
    /* Specific styling for the league table to match Streamlit's look */
    .league-table {
        width: 100%;
        max-width: 800px;
        border-collapse: collapse;
        font-size: 16px;
        text-align: left;
    }

    .league-table th {
        text-align: left;
        background: #FFD166;
        color: #14213d;
        padding: 12px 8px;
        border-bottom: 2px solid #ddd;
    }

    .league-table td {
        text-align: left;
        padding: 10px 8px;
        border-bottom: 1px solid #eee;
    }

    .league-table tr:nth-child(even) {
        background: #f9f9f9;
    }

    .league-table tr:hover {
        background: #f1f1f1;
    }

    /* Position & arrow alignment helpers */
    .league-table td .pos-cell {
        display: inline-flex;
        align-items: center;
        gap: 10px;               /* space between number and arrow area */
    }

    /* fixed width for the numeric part so 1 and 10 align properly */
    .league-table td .pos-number {
        display: inline-block;
        width: 2ch;             /* width sized to roughly 2 digits; tweak if needed */
        min-width: 2ch;
        text-align: right;
        font-weight: 600;
    }

    /* fixed width for arrow + move count so arrow remains vertically aligned */
    .league-table td .pos-arrow {
        display: inline-block;
        width: 3ch;             /* room for arrow + small number (e.g. "â–²10") */
        min-width: 3ch;
        text-align: left;
        font-weight: 600;
    }

    /* colored states */
    .league-table td .pos-arrow.up { color: #16a34a; }   /* green */
    .league-table td .pos-arrow.down { color: #ef4444; } /* red */

</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const matchWeekDropdown = document.getElementById('match-week');
        matchWeekDropdown.addEventListener('change', function() {
            const selectedWeek = this.value;
            window.location.href = `?match_week=${selectedWeek}`;
        });
    });
</script>
{% endblock %}